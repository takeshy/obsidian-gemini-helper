# Gemini Helper for Obsidian

[![DeepWiki](https://img.shields.io/badge/DeepWiki-takeshy%2Fobsidian--gemini--helper-blue.svg?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTQgMTloMTZhMiAyIDAgMCAwIDItMlY3YTIgMiAwIDAgMC0yLTJINWEyIDIgMCAwIDAtMiAydjEyYTIgMiAwIDAgMSAyLTJ6Ii8+PHBhdGggZD0iTTkgMTV2LTQiLz48cGF0aCBkPSJNMTIgMTV2LTIiLz48cGF0aCBkPSJNMTUgMTV2LTQiLz48L3N2Zz4=)](https://deepwiki.com/takeshy/obsidian-gemini-helper)

**å…è´¹å¼€æºçš„** Obsidian AI åŠ©æ‰‹ï¼Œæä¾›ç”± Google Gemini é©±åŠ¨çš„ **èŠå¤©**ã€**å·¥ä½œæµè‡ªåŠ¨åŒ–** å’Œ **RAG** åŠŸèƒ½ã€‚

> **æœ¬æ’ä»¶å®Œå…¨å…è´¹ã€‚** æ‚¨åªéœ€è¦ä» [ai.google.dev](https://ai.google.dev) è·å– Google Gemini API å¯†é’¥ï¼ˆå…è´¹æˆ–ä»˜è´¹ï¼‰ï¼Œæˆ–ä½¿ç”¨ CLI å·¥å…·ï¼š[Gemini CLI](https://github.com/google-gemini/gemini-cli)ã€[Claude Code](https://github.com/anthropics/claude-code) æˆ– [Codex CLI](https://github.com/openai/codex)ã€‚

## ä¸»è¦ç‰¹æ€§

- **AI èŠå¤©** - æµå¼å“åº”ã€æ–‡ä»¶é™„ä»¶ã€ä»“åº“æ“ä½œã€æ–œæ å‘½ä»¤
- **å·¥ä½œæµæ„å»ºå™¨** - ä½¿ç”¨å¯è§†åŒ–èŠ‚ç‚¹ç¼–è¾‘å™¨å’Œ 23 ç§èŠ‚ç‚¹ç±»å‹è‡ªåŠ¨åŒ–å¤šæ­¥éª¤ä»»åŠ¡
- **ç¼–è¾‘å†å²** - ä½¿ç”¨å·®å¼‚è§†å›¾è¿½è¸ªå’Œæ¢å¤ AI æ‰€åšçš„æ›´æ”¹
- **RAG** - æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œåœ¨æ‚¨çš„ä»“åº“ä¸­è¿›è¡Œæ™ºèƒ½æœç´¢
- **ç½‘é¡µæœç´¢** - é€šè¿‡ Google æœç´¢è·å–æœ€æ–°ä¿¡æ¯
- **å›¾åƒç”Ÿæˆ** - ä½¿ç”¨ Gemini å›¾åƒæ¨¡å‹åˆ›å»ºå›¾åƒ
- **åŠ å¯†** - ä½¿ç”¨å¯†ç ä¿æŠ¤èŠå¤©å†å²å’Œå·¥ä½œæµæ‰§è¡Œæ—¥å¿—

![èŠå¤©ä¸­çš„å›¾åƒç”Ÿæˆ](docs/images/chat_image.png)

## API å¯†é’¥ / CLI é€‰é¡¹

æœ¬æ’ä»¶éœ€è¦ Google Gemini API å¯†é’¥æˆ– CLI å·¥å…·ã€‚æ‚¨å¯ä»¥é€‰æ‹©ï¼š

| åŠŸèƒ½ | å…è´¹ API å¯†é’¥ | ä»˜è´¹ API å¯†é’¥ | CLI |
|---------|--------------|--------------|-----|
| åŸºç¡€èŠå¤© | âœ… | âœ… | âœ… |
| ä»“åº“æ“ä½œ | âœ… | âœ… | ä»…è¯»å–/æœç´¢ |
| ç½‘é¡µæœç´¢ | âœ… | âœ… | âŒ |
| RAG | âœ… (æœ‰é™åˆ¶) | âœ… | âŒ |
| å·¥ä½œæµ | âœ… | âœ… | âœ… |
| å›¾åƒç”Ÿæˆ | âŒ | âœ… | âŒ |
| æ¨¡å‹ | Flash, Gemma | Flash, Pro, Image | Gemini CLI, Claude Code, Codex |
| è´¹ç”¨ | **å…è´¹** | æŒ‰ä½¿ç”¨ä»˜è´¹ | **å…è´¹** |

> [!TIP]
> **CLI é€‰é¡¹** è®©æ‚¨åªéœ€ä¸€ä¸ªè´¦æˆ·å³å¯ä½¿ç”¨æ——èˆ°æ¨¡å‹ - æ— éœ€ API å¯†é’¥ï¼
> - **Gemini CLI**ï¼šå®‰è£… [Gemini CLI](https://github.com/google-gemini/gemini-cli)ï¼Œè¿è¡Œ `gemini` å¹¶ä½¿ç”¨ `/auth` è¿›è¡Œèº«ä»½éªŒè¯
> - **Claude CLI**ï¼šå®‰è£… [Claude Code](https://github.com/anthropics/claude-code)ï¼ˆ`npm install -g @anthropic-ai/claude-code`ï¼‰ï¼Œè¿è¡Œ `claude` å¹¶è¿›è¡Œèº«ä»½éªŒè¯
> - **Codex CLI**ï¼šå®‰è£… [Codex CLI](https://github.com/openai/codex)ï¼ˆ`npm install -g @openai/codex`ï¼‰ï¼Œè¿è¡Œ `codex` å¹¶è¿›è¡Œèº«ä»½éªŒè¯

### å…è´¹ API å¯†é’¥ä½¿ç”¨æŠ€å·§

- **é€Ÿç‡é™åˆ¶** æŒ‰æ¨¡å‹è®¡ç®—ï¼Œæ¯æ—¥é‡ç½®ã€‚åˆ‡æ¢æ¨¡å‹å¯ç»§ç»­ä½¿ç”¨ã€‚
- **RAG åŒæ­¥** æœ‰é™åˆ¶ã€‚æ¯å¤©è¿è¡Œ"åŒæ­¥ä»“åº“" - å·²ä¸Šä¼ çš„æ–‡ä»¶ä¼šè¢«è·³è¿‡ã€‚
- **Gemma æ¨¡å‹** å’Œ **Gemini CLI** åœ¨èŠå¤©ä¸­ä¸æ”¯æŒä»“åº“æ“ä½œï¼Œä½†**å·¥ä½œæµä»å¯ä½¿ç”¨ `note`ã€`note-read` ç­‰èŠ‚ç‚¹ç±»å‹è¯»å†™ç¬”è®°**ã€‚`{content}` å’Œ `{selection}` å˜é‡åŒæ ·æœ‰æ•ˆã€‚

---

# AI èŠå¤©

AI èŠå¤©åŠŸèƒ½æä¾›ä¸ Google Gemini çš„äº¤äº’å¼å¯¹è¯ç•Œé¢ï¼Œä¸æ‚¨çš„ Obsidian ä»“åº“æ·±åº¦é›†æˆã€‚

![èŠå¤©ç•Œé¢](docs/images/chat.png)

## æ–œæ å‘½ä»¤

åˆ›å»ºå¯é€šè¿‡ `/` è§¦å‘çš„å¯å¤ç”¨æç¤ºè¯æ¨¡æ¿ï¼š

- ä½¿ç”¨ `{selection}`ï¼ˆé€‰ä¸­æ–‡æœ¬ï¼‰å’Œ `{content}`ï¼ˆå½“å‰ç¬”è®°ï¼‰å®šä¹‰æ¨¡æ¿
- å¯ä¸ºæ¯ä¸ªå‘½ä»¤å•ç‹¬è®¾ç½®æ¨¡å‹å’Œæœç´¢è¦†ç›–
- è¾“å…¥ `/` æŸ¥çœ‹å¯ç”¨å‘½ä»¤

**é»˜è®¤å‘½ä»¤ï¼š** `/infographic` - å°†å†…å®¹è½¬æ¢ä¸º HTML ä¿¡æ¯å›¾

![ä¿¡æ¯å›¾ç¤ºä¾‹](docs/images/chat_infographic.png)

## @ æåŠ

è¾“å…¥ `@` æ¥å¼•ç”¨æ–‡ä»¶å’Œå˜é‡ï¼š

- `{selection}` - é€‰ä¸­çš„æ–‡æœ¬
- `{content}` - å½“å‰ç¬”è®°å†…å®¹
- ä»»æ„ä»“åº“æ–‡ä»¶ - æµè§ˆå¹¶æ’å…¥ï¼ˆä»…è·¯å¾„ï¼›AI é€šè¿‡å·¥å…·è¯»å–å†…å®¹ï¼‰

> [!NOTE]
> **`{selection}` å’Œ `{content}` çš„å·¥ä½œåŸç†ï¼š** å½“æ‚¨ä» Markdown è§†å›¾åˆ‡æ¢åˆ°èŠå¤©è§†å›¾æ—¶ï¼Œç”±äºç„¦ç‚¹å˜åŒ–ï¼Œé€‰æ‹©é€šå¸¸ä¼šè¢«æ¸…é™¤ã€‚ä¸ºäº†ä¿ç•™æ‚¨çš„é€‰æ‹©ï¼Œæ’ä»¶ä¼šåœ¨åˆ‡æ¢è§†å›¾æ—¶æ•è·å®ƒï¼Œå¹¶åœ¨ Markdown è§†å›¾ä¸­ç”¨èƒŒæ™¯è‰²é«˜äº®æ˜¾ç¤ºé€‰ä¸­åŒºåŸŸã€‚`{selection}` é€‰é¡¹ä»…åœ¨æœ‰æ–‡æœ¬è¢«é€‰ä¸­æ—¶æ‰ä¼šå‡ºç°åœ¨ @ å»ºè®®ä¸­ã€‚
>
> `{selection}` å’Œ `{content}` éƒ½**æ•…æ„ä¸åœ¨è¾“å…¥åŒºåŸŸå±•å¼€**â€”â€”ç”±äºèŠå¤©è¾“å…¥æ¡†è¾ƒå°ï¼Œå±•å¼€é•¿æ–‡æœ¬ä¼šä½¿è¾“å…¥å˜å¾—å›°éš¾ã€‚å†…å®¹ä¼šåœ¨æ‚¨å‘é€æ¶ˆæ¯æ—¶å±•å¼€ï¼Œæ‚¨å¯ä»¥é€šè¿‡æŸ¥çœ‹èŠå¤©ä¸­å·²å‘é€çš„æ¶ˆæ¯æ¥éªŒè¯è¿™ä¸€ç‚¹ã€‚

> [!NOTE]
> ä»“åº“æ–‡ä»¶çš„ @ æåŠä»…æ’å…¥æ–‡ä»¶è·¯å¾„ - AI é€šè¿‡å·¥å…·è¯»å–å†…å®¹ã€‚è¿™åœ¨ Gemma æ¨¡å‹ä¸­ä¸å¯ç”¨ï¼ˆä¸æ”¯æŒä»“åº“å·¥å…·ï¼‰ã€‚Gemini CLI å¯é€šè¿‡ shell è¯»å–æ–‡ä»¶ï¼Œä½†å“åº”æ ¼å¼å¯èƒ½æœ‰æ‰€ä¸åŒã€‚

## æ–‡ä»¶é™„ä»¶

ç›´æ¥é™„åŠ æ–‡ä»¶ï¼šå›¾åƒï¼ˆPNGã€JPEGã€GIFã€WebPï¼‰ã€PDFã€æ–‡æœ¬æ–‡ä»¶

## å‡½æ•°è°ƒç”¨ï¼ˆä»“åº“æ“ä½œï¼‰

AI å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·ä¸æ‚¨çš„ä»“åº“äº¤äº’ï¼š

| å·¥å…· | æè¿° |
|------|-------------|
| `read_note` | è¯»å–ç¬”è®°å†…å®¹ |
| `create_note` | åˆ›å»ºæ–°ç¬”è®° |
| `propose_edit` | å¸¦ç¡®è®¤å¯¹è¯æ¡†çš„ç¼–è¾‘ |
| `propose_delete` | å¸¦ç¡®è®¤å¯¹è¯æ¡†çš„åˆ é™¤ |
| `bulk_propose_edit` | å¸¦é€‰æ‹©å¯¹è¯æ¡†çš„æ‰¹é‡ç¼–è¾‘å¤šä¸ªæ–‡ä»¶ |
| `bulk_propose_delete` | å¸¦é€‰æ‹©å¯¹è¯æ¡†çš„æ‰¹é‡åˆ é™¤å¤šä¸ªæ–‡ä»¶ |
| `search_notes` | æŒ‰åç§°æˆ–å†…å®¹æœç´¢ä»“åº“ |
| `list_notes` | åˆ—å‡ºæ–‡ä»¶å¤¹ä¸­çš„ç¬”è®° |
| `rename_note` | é‡å‘½å/ç§»åŠ¨ç¬”è®° |
| `create_folder` | åˆ›å»ºæ–°æ–‡ä»¶å¤¹ |
| `list_folders` | åˆ—å‡ºä»“åº“ä¸­çš„æ–‡ä»¶å¤¹ |
| `get_active_note_info` | è·å–å½“å‰ç¬”è®°çš„ä¿¡æ¯ |
| `get_rag_sync_status` | æ£€æŸ¥ RAG åŒæ­¥çŠ¶æ€ |

### Vault å·¥å…·æ¨¡å¼

å½“ AI åœ¨èŠå¤©ä¸­å¤„ç†ç¬”è®°æ—¶ï¼Œå®ƒä¼šä½¿ç”¨ Vault å·¥å…·ã€‚é€šè¿‡é™„ä»¶æŒ‰é’®ä¸‹æ–¹çš„æ•°æ®åº“å›¾æ ‡ï¼ˆğŸ“¦ï¼‰æ§åˆ¶ AI å¯ä»¥ä½¿ç”¨å“ªäº› Vault å·¥å…·ï¼š

| æ¨¡å¼ | æè¿° | å¯ç”¨å·¥å…· |
|------|------|----------|
| **Vault: å…¨éƒ¨** | å®Œå…¨è®¿é—® Vault | æ‰€æœ‰å·¥å…· |
| **Vault: æ— æœç´¢** | æ’é™¤æœç´¢å·¥å…· | é™¤ `search_notes`ã€`list_notes` å¤–çš„æ‰€æœ‰å·¥å…· |
| **Vault: å…³é—­** | æ—  Vault è®¿é—® | æ—  |

**ä½•æ—¶ä½¿ç”¨å„æ¨¡å¼ï¼š**

- **Vault: å…¨éƒ¨** - é€šç”¨é»˜è®¤æ¨¡å¼ã€‚AI å¯ä»¥è¯»å–ã€å†™å…¥å’Œæœç´¢æ‚¨çš„ vaultã€‚
- **Vault: æ— æœç´¢** - å½“æ‚¨åªæƒ³ä½¿ç”¨ RAG æœç´¢ï¼Œæˆ–è€…å·²ç»çŸ¥é“ç›®æ ‡æ–‡ä»¶æ—¶ä½¿ç”¨ã€‚è¿™å¯ä»¥é¿å…å¤šä½™çš„ vault æœç´¢ï¼ŒèŠ‚çœ token å¹¶æé«˜å“åº”é€Ÿåº¦ã€‚
- **Vault: å…³é—­** - å½“æ‚¨å®Œå…¨ä¸éœ€è¦è®¿é—® vault æ—¶ä½¿ç”¨ã€‚

**è‡ªåŠ¨æ¨¡å¼é€‰æ‹©ï¼š**

| æ¡ä»¶ | é»˜è®¤æ¨¡å¼ | å¯æ›´æ”¹ |
|------|----------|--------|
| CLI æ¨¡å‹ï¼ˆGemini/Claude/Codex CLIï¼‰ | Vault: å…³é—­ | å¦ |
| Gemma æ¨¡å‹ | Vault: å…³é—­ | å¦ |
| å¯ç”¨ Web Search | Vault: å…³é—­ | å¦ |
| å¯ç”¨ RAG | Vault: å…³é—­ | å¦ |
| æ—  RAG | Vault: å…¨éƒ¨ | æ˜¯ |

**ä¸ºä»€ä¹ˆæŸäº›æ¨¡å¼æ˜¯å¼ºåˆ¶çš„ï¼š**

- **CLI/Gemma æ¨¡å‹**ï¼šè¿™äº›æ¨¡å‹ä¸æ”¯æŒå‡½æ•°è°ƒç”¨ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨ Vault å·¥å…·ã€‚
- **Web Search**ï¼šæŒ‰è®¾è®¡ï¼Œå½“å¯ç”¨ Web Search æ—¶ï¼ŒVault å·¥å…·ä¼šè¢«ç¦ç”¨ã€‚
- **å¯ç”¨ RAG**ï¼šGemini API ä¸æ”¯æŒå°† File Searchï¼ˆRAGï¼‰ä¸å‡½æ•°è°ƒç”¨ç»“åˆä½¿ç”¨ã€‚å¯ç”¨ RAG æ—¶ï¼ŒVault å·¥å…·å’Œ MCP ä¼šè‡ªåŠ¨ç¦ç”¨ã€‚

## å®‰å…¨ç¼–è¾‘

å½“ AI ä½¿ç”¨ `propose_edit` æ—¶ï¼š
1. ç¡®è®¤å¯¹è¯æ¡†ä¼šæ˜¾ç¤ºå»ºè®®çš„æ›´æ”¹
2. ç‚¹å‡»**åº”ç”¨**å°†æ›´æ”¹å†™å…¥æ–‡ä»¶
3. ç‚¹å‡»**æ”¾å¼ƒ**å–æ¶ˆè€Œä¸ä¿®æ”¹æ–‡ä»¶

> åœ¨æ‚¨ç¡®è®¤ä¹‹å‰ï¼Œæ›´æ”¹ä¸ä¼šè¢«å†™å…¥ã€‚

## ç¼–è¾‘å†å²

è¿½è¸ªå’Œæ¢å¤å¯¹ç¬”è®°æ‰€åšçš„æ›´æ”¹ï¼š

- **è‡ªåŠ¨è¿½è¸ª** - æ‰€æœ‰ AI ç¼–è¾‘ï¼ˆèŠå¤©ã€å·¥ä½œæµï¼‰å’Œæ‰‹åŠ¨æ›´æ”¹éƒ½ä¼šè¢«è®°å½•
- **æ–‡ä»¶èœå•è®¿é—®** - å³é”®ç‚¹å‡» markdown æ–‡ä»¶å¯è®¿é—®ï¼š
  - **å¿«ç…§** - å°†å½“å‰çŠ¶æ€ä¿å­˜ä¸ºå¿«ç…§
  - **å†å²** - æ‰“å¼€ç¼–è¾‘å†å²æ¨¡æ€æ¡†

![æ–‡ä»¶èœå•](docs/images/snap_history.png)

- **å‘½ä»¤é¢æ¿** - ä¹Ÿå¯é€šè¿‡"Show edit history"å‘½ä»¤è®¿é—®
- **å·®å¼‚è§†å›¾** - ä½¿ç”¨é¢œè‰²ç¼–ç çš„æ·»åŠ /åˆ é™¤å‡†ç¡®æ˜¾ç¤ºæ›´æ”¹å†…å®¹
- **æ¢å¤** - ä¸€é”®æ¢å¤åˆ°ä»»ä½•ä¹‹å‰çš„ç‰ˆæœ¬
- **å¤åˆ¶** - å°†å†å²ç‰ˆæœ¬ä¿å­˜ä¸ºæ–°æ–‡ä»¶ï¼ˆé»˜è®¤åç§°ï¼š`{filename}_{datetime}.md`ï¼‰
- **å¯è°ƒæ•´å¤§å°çš„æ¨¡æ€æ¡†** - æ‹–åŠ¨ç§»åŠ¨ï¼Œä»è§’è½è°ƒæ•´å¤§å°

**å·®å¼‚æ˜¾ç¤ºï¼š**
- `+` è¡Œå­˜åœ¨äºæ—§ç‰ˆæœ¬ä¸­
- `-` è¡Œæ˜¯åœ¨æ–°ç‰ˆæœ¬ä¸­æ·»åŠ çš„

**å·¥ä½œåŸç†ï¼š**

ç¼–è¾‘å†å²ä½¿ç”¨åŸºäºå¿«ç…§çš„æ–¹æ³•ï¼š

1. **å¿«ç…§åˆ›å»º** - å½“æ–‡ä»¶é¦–æ¬¡æ‰“å¼€æˆ–è¢« AI ä¿®æ”¹æ—¶ï¼Œå…¶å†…å®¹çš„å¿«ç…§ä¼šè¢«ä¿å­˜
2. **å·®å¼‚è®°å½•** - å½“æ–‡ä»¶è¢«ä¿®æ”¹æ—¶ï¼Œæ–°å†…å®¹ä¸å¿«ç…§ä¹‹é—´çš„å·®å¼‚ä¼šä½œä¸ºå†å²æ¡ç›®è®°å½•
3. **å¿«ç…§æ›´æ–°** - æ¯æ¬¡ä¿®æ”¹åï¼Œå¿«ç…§ä¼šæ›´æ–°ä¸ºæ–°å†…å®¹
4. **æ¢å¤** - è¦æ¢å¤åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œä»å¿«ç…§åå‘åº”ç”¨å·®å¼‚

**ä½•æ—¶è®°å½•å†å²ï¼š**
- AI èŠå¤©ç¼–è¾‘ï¼ˆ`propose_edit` å·¥å…·ï¼‰
- å·¥ä½œæµç¬”è®°ä¿®æ”¹ï¼ˆ`note` èŠ‚ç‚¹ï¼‰
- é€šè¿‡å‘½ä»¤æ‰‹åŠ¨ä¿å­˜
- æ‰“å¼€æ–‡ä»¶æ—¶å¦‚æœä¸å¿«ç…§ä¸åŒåˆ™è‡ªåŠ¨æ£€æµ‹

**å­˜å‚¨ï¼š** ç¼–è¾‘å†å²å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒObsidian é‡å¯æ—¶ä¼šè¢«æ¸…é™¤ã€‚æŒä¹…çš„ç‰ˆæœ¬è·Ÿè¸ªç”± Obsidian å†…ç½®çš„æ–‡ä»¶æ¢å¤åŠŸèƒ½è¦†ç›–ã€‚

**è®¾ç½®ï¼š**
- åœ¨æ’ä»¶è®¾ç½®ä¸­å¯ç”¨/ç¦ç”¨
- é…ç½®å·®å¼‚çš„ä¸Šä¸‹æ–‡è¡Œæ•°

![ç¼–è¾‘å†å²æ¨¡æ€æ¡†](docs/images/edit_history.png)

## RAG

æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œç”¨äºæ™ºèƒ½ä»“åº“æœç´¢ï¼š

- **æ”¯æŒçš„æ–‡ä»¶** - Markdownã€PDFã€å›¾åƒï¼ˆPNGã€JPEGã€GIFã€WebPï¼‰
- **å†…éƒ¨æ¨¡å¼** - å°†ä»“åº“æ–‡ä»¶åŒæ­¥åˆ° Google File Search
- **å¤–éƒ¨æ¨¡å¼** - ä½¿ç”¨ç°æœ‰çš„å­˜å‚¨ ID
- **å¢é‡åŒæ­¥** - ä»…ä¸Šä¼ æ›´æ”¹çš„æ–‡ä»¶
- **ç›®æ ‡æ–‡ä»¶å¤¹** - æŒ‡å®šè¦åŒ…å«çš„æ–‡ä»¶å¤¹
- **æ’é™¤æ¨¡å¼** - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æ’é™¤æ–‡ä»¶

![RAG è®¾ç½®](docs/images/setting_rag.png)

## MCP æœåŠ¡å™¨

MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡å™¨æä¾›é¢å¤–çš„å·¥å…·ï¼Œæ‰©å±• AI åœ¨ Vault æ“ä½œä¹‹å¤–çš„èƒ½åŠ›ã€‚

**è®¾ç½®ï¼š**

1. æ‰“å¼€æ’ä»¶è®¾ç½® â†’ **MCP æœåŠ¡å™¨**éƒ¨åˆ†
2. ç‚¹å‡»**æ·»åŠ æœåŠ¡å™¨**
3. è¾“å…¥æœåŠ¡å™¨åç§°å’Œ URL
4. é…ç½®å¯é€‰çš„è®¤è¯å¤´ä¿¡æ¯ï¼ˆJSON æ ¼å¼ï¼‰
5. ç‚¹å‡»**æµ‹è¯•è¿æ¥**ä»¥éªŒè¯å¹¶è·å–å¯ç”¨å·¥å…·
6. ä¿å­˜æœåŠ¡å™¨é…ç½®

> **æ³¨æ„ï¼š** ä¿å­˜å‰å¿…é¡»æµ‹è¯•è¿æ¥ã€‚è¿™ç¡®ä¿æœåŠ¡å™¨å¯è®¿é—®å¹¶æ˜¾ç¤ºå¯ç”¨å·¥å…·ã€‚

![MCP æœåŠ¡å™¨è®¾ç½®](docs/images/setting_mcp.png)

**ä½¿ç”¨ MCP å·¥å…·ï¼š**

- **åœ¨èŠå¤©ä¸­ï¼š** ç‚¹å‡»æ•°æ®åº“å›¾æ ‡ï¼ˆğŸ“¦ï¼‰æ‰“å¼€å·¥å…·è®¾ç½®ã€‚æŒ‰å¯¹è¯å¯ç”¨/ç¦ç”¨ MCP æœåŠ¡å™¨ã€‚
- **åœ¨å·¥ä½œæµä¸­ï¼š** ä½¿ç”¨ `mcp` èŠ‚ç‚¹è°ƒç”¨ MCP æœåŠ¡å™¨å·¥å…·ã€‚

**å·¥å…·æç¤ºï¼š** è¿æ¥æµ‹è¯•æˆåŠŸåï¼Œå¯ç”¨å·¥å…·åç§°ä¼šè¢«ä¿å­˜ï¼Œå¹¶åœ¨è®¾ç½®å’ŒèŠå¤©ç•Œé¢ä¸­æ˜¾ç¤ºä»¥ä¾›å‚è€ƒã€‚

### MCP Appsï¼ˆäº¤äº’å¼ UIï¼‰

ä¸€äº› MCP å·¥å…·è¿”å›äº¤äº’å¼ UIï¼Œå…è®¸æ‚¨ä»¥å¯è§†åŒ–æ–¹å¼ä¸å·¥å…·ç»“æœè¿›è¡Œäº¤äº’ã€‚æ­¤åŠŸèƒ½åŸºäº [MCP Apps è§„èŒƒ](https://github.com/anthropics/anthropic-cookbook/tree/main/misc/mcp_apps)ã€‚

![MCP Apps](docs/images/mcp_apps.png)

**å·¥ä½œåŸç†ï¼š**

- å½“ MCP å·¥å…·åœ¨å“åº”å…ƒæ•°æ®ä¸­è¿”å› `ui://` èµ„æº URI æ—¶ï¼Œæ’ä»¶ä¼šè·å–å¹¶æ¸²æŸ“ HTML å†…å®¹
- UI åœ¨æ²™ç›’ iframe ä¸­æ˜¾ç¤ºä»¥ç¡®ä¿å®‰å…¨ï¼ˆ`sandbox="allow-scripts allow-forms"`ï¼‰
- äº¤äº’å¼åº”ç”¨å¯ä»¥é€šè¿‡ JSON-RPC æ¡¥æ¥è°ƒç”¨å…¶ä»– MCP å·¥å…·å¹¶æ›´æ–°ä¸Šä¸‹æ–‡

**åœ¨èŠå¤©ä¸­ï¼š**
- MCP Apps åœ¨åŠ©æ‰‹æ¶ˆæ¯ä¸­å†…è”æ˜¾ç¤ºï¼Œå¸¦æœ‰å±•å¼€/æŠ˜å æŒ‰é’®
- ç‚¹å‡» âŠ• å±•å¼€ä¸ºå…¨å±ï¼ŒâŠ– æŠ˜å 

**åœ¨å·¥ä½œæµä¸­ï¼š**
- MCP Apps åœ¨å·¥ä½œæµæ‰§è¡ŒæœŸé—´ä»¥æ¨¡æ€å¯¹è¯æ¡†å½¢å¼æ˜¾ç¤º
- å·¥ä½œæµä¼šæš‚åœä»¥å…è®¸ç”¨æˆ·äº¤äº’ï¼Œç„¶ååœ¨å…³é—­æ¨¡æ€æ¡†åç»§ç»­

> **å®‰å…¨æ€§ï¼š** æ‰€æœ‰ MCP App å†…å®¹éƒ½åœ¨å…·æœ‰å—é™æƒé™çš„æ²™ç›’ iframe ä¸­è¿è¡Œã€‚iframe æ— æ³•è®¿é—®çˆ¶é¡µé¢çš„ DOMã€Cookie æˆ–æœ¬åœ°å­˜å‚¨ã€‚ä»…å¯ç”¨ `allow-scripts` å’Œ `allow-forms`ã€‚

---

# å·¥ä½œæµæ„å»ºå™¨

ç›´æ¥åœ¨ Markdown æ–‡ä»¶ä¸­æ„å»ºè‡ªåŠ¨åŒ–å¤šæ­¥éª¤å·¥ä½œæµã€‚**æ— éœ€ç¼–ç¨‹çŸ¥è¯†** - åªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°æ‚¨æƒ³è¦çš„å†…å®¹ï¼ŒAI å°±ä¼šä¸ºæ‚¨åˆ›å»ºå·¥ä½œæµã€‚

![å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨](docs/images/visual_workflow.png)

## AI é©±åŠ¨çš„å·¥ä½œæµåˆ›å»º

**æ‚¨ä¸éœ€è¦å­¦ä¹  YAML è¯­æ³•æˆ–èŠ‚ç‚¹ç±»å‹ã€‚** åªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°æ‚¨çš„å·¥ä½œæµï¼š

1. åœ¨ Gemini ä¾§è¾¹æ ä¸­æ‰“å¼€**å·¥ä½œæµ**æ ‡ç­¾
2. ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© **+ New (AI)**
3. æè¿°æ‚¨æƒ³è¦çš„å†…å®¹ï¼š*"åˆ›å»ºä¸€ä¸ªå·¥ä½œæµï¼Œæ€»ç»“é€‰ä¸­çš„ç¬”è®°å¹¶ä¿å­˜åˆ° summaries æ–‡ä»¶å¤¹"*
4. ç‚¹å‡»**ç”Ÿæˆ** - AI ä¼šåˆ›å»ºå®Œæ•´çš„å·¥ä½œæµ

![ä½¿ç”¨ AI åˆ›å»ºå·¥ä½œæµ](docs/images/create_workflow_with_ai.png)

**ä»¥åŒæ ·çš„æ–¹å¼ä¿®æ”¹ç°æœ‰å·¥ä½œæµï¼š**
1. åŠ è½½ä»»æ„å·¥ä½œæµ
2. ç‚¹å‡» **AI Modify** æŒ‰é’®
3. æè¿°æ›´æ”¹ï¼š*"æ·»åŠ ä¸€ä¸ªæ­¥éª¤å°†æ‘˜è¦ç¿»è¯‘æˆæ—¥è¯­"*
4. æŸ¥çœ‹å¹¶åº”ç”¨

![AI å·¥ä½œæµä¿®æ”¹](docs/images/modify_workflow_with_ai.png)

## å¿«é€Ÿå…¥é—¨ï¼ˆæ‰‹åŠ¨ï¼‰

æ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç¼–å†™å·¥ä½œæµã€‚åœ¨ä»»æ„ Markdown æ–‡ä»¶ä¸­æ·»åŠ å·¥ä½œæµä»£ç å—ï¼š

````markdown
```workflow
name: Quick Summary
nodes:
  - id: input
    type: dialog
    title: Enter topic
    inputTitle: Topic
    saveTo: topic
  - id: generate
    type: command
    prompt: "Write a brief summary about {{topic.input}}"
    saveTo: result
  - id: save
    type: note
    path: "summaries/{{topic.input}}.md"
    content: "{{result}}"
    mode: create
```
````

åœ¨ Gemini ä¾§è¾¹æ ä¸­æ‰“å¼€**å·¥ä½œæµ**æ ‡ç­¾æ¥è¿è¡Œå®ƒã€‚

## å¯ç”¨èŠ‚ç‚¹ç±»å‹

23 ç§èŠ‚ç‚¹ç±»å‹å¯ç”¨äºæ„å»ºå·¥ä½œæµï¼š

| ç±»åˆ« | èŠ‚ç‚¹ |
|----------|-------|
| å˜é‡ | `variable`, `set` |
| æ§åˆ¶ | `if`, `while` |
| LLM | `command` |
| æ•°æ® | `http`, `json` |
| ç¬”è®° | `note`, `note-read`, `note-search`, `note-list`, `folder-list`, `open` |
| æ–‡ä»¶ | `file-explorer`, `file-save` |
| æç¤º | `prompt-file`, `prompt-selection`, `dialog` |
| ç»„åˆ | `workflow` |
| RAG | `rag-sync` |
| å¤–éƒ¨ | `mcp`, `obsidian-command` |
| å®ç”¨å·¥å…· | `sleep` |

> **è¯¦ç»†çš„èŠ‚ç‚¹è§„èŒƒå’Œç¤ºä¾‹ï¼Œè¯·å‚é˜… [WORKFLOW_NODES.md](docs/WORKFLOW_NODES_zh.md)**

## å¿«æ·é”®æ¨¡å¼

åˆ†é…é”®ç›˜å¿«æ·é”®ä»¥å³æ—¶è¿è¡Œå·¥ä½œæµï¼š

1. åœ¨å·¥ä½œæµä¸­æ·»åŠ  `name:` å­—æ®µ
2. æ‰“å¼€å·¥ä½œæµæ–‡ä»¶å¹¶ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©å·¥ä½œæµ
3. ç‚¹å‡»å·¥ä½œæµé¢æ¿é¡µè„šä¸­çš„é”®ç›˜å›¾æ ‡ï¼ˆâŒ¨ï¸ï¼‰
4. å‰å¾€è®¾ç½® â†’ å¿«æ·é”® â†’ æœç´¢"Workflow: [æ‚¨çš„å·¥ä½œæµåç§°]"
5. åˆ†é…å¿«æ·é”®ï¼ˆä¾‹å¦‚ `Ctrl+Shift+T`ï¼‰

é€šè¿‡å¿«æ·é”®è§¦å‘æ—¶ï¼š
- `prompt-file` è‡ªåŠ¨ä½¿ç”¨å½“å‰æ–‡ä»¶ï¼ˆæ— å¯¹è¯æ¡†ï¼‰
- `prompt-selection` ä½¿ç”¨å½“å‰é€‰æ‹©ï¼Œå¦‚æœæ²¡æœ‰é€‰æ‹©åˆ™ä½¿ç”¨å®Œæ•´æ–‡ä»¶å†…å®¹

## äº‹ä»¶è§¦å‘å™¨

å·¥ä½œæµå¯ä»¥ç”± Obsidian äº‹ä»¶è‡ªåŠ¨è§¦å‘ï¼š

![äº‹ä»¶è§¦å‘å™¨è®¾ç½®](docs/images/event_setting.png)

| äº‹ä»¶ | æè¿° |
|-------|-------------|
| File Created | åˆ›å»ºæ–°æ–‡ä»¶æ—¶è§¦å‘ |
| File Modified | ä¿å­˜æ–‡ä»¶æ—¶è§¦å‘ï¼ˆ5ç§’é˜²æŠ–ï¼‰ |
| File Deleted | åˆ é™¤æ–‡ä»¶æ—¶è§¦å‘ |
| File Renamed | é‡å‘½åæ–‡ä»¶æ—¶è§¦å‘ |
| File Opened | æ‰“å¼€æ–‡ä»¶æ—¶è§¦å‘ |

**äº‹ä»¶è§¦å‘å™¨è®¾ç½®ï¼š**
1. åœ¨å·¥ä½œæµä¸­æ·»åŠ  `name:` å­—æ®µ
2. æ‰“å¼€å·¥ä½œæµæ–‡ä»¶å¹¶ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©å·¥ä½œæµ
3. ç‚¹å‡»å·¥ä½œæµé¢æ¿é¡µè„šä¸­çš„é—ªç”µå›¾æ ‡ï¼ˆâš¡ï¼‰
4. é€‰æ‹©å“ªäº›äº‹ä»¶åº”è§¦å‘å·¥ä½œæµ
5. å¯é€‰æ‹©æ·»åŠ æ–‡ä»¶æ¨¡å¼è¿‡æ»¤å™¨

**æ–‡ä»¶æ¨¡å¼ç¤ºä¾‹ï¼š**
- `**/*.md` - ä»»æ„æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰ Markdown æ–‡ä»¶
- `journal/*.md` - ä»… journal æ–‡ä»¶å¤¹ä¸­çš„ Markdown æ–‡ä»¶
- `*.md` - ä»…æ ¹æ–‡ä»¶å¤¹ä¸­çš„ Markdown æ–‡ä»¶
- `**/{daily,weekly}/*.md` - daily æˆ– weekly æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶
- `projects/[a-z]*.md` - ä»¥å°å†™å­—æ¯å¼€å¤´çš„æ–‡ä»¶

**äº‹ä»¶å˜é‡ï¼š** å½“ç”±äº‹ä»¶è§¦å‘æ—¶ï¼Œä»¥ä¸‹å˜é‡ä¼šè‡ªåŠ¨è®¾ç½®ï¼š

| å˜é‡ | æè¿° |
|----------|-------------|
| `__eventType__` | äº‹ä»¶ç±»å‹ï¼š`create`ã€`modify`ã€`delete`ã€`rename`ã€`file-open` |
| `__eventFilePath__` | å—å½±å“æ–‡ä»¶çš„è·¯å¾„ |
| `__eventFile__` | åŒ…å«æ–‡ä»¶ä¿¡æ¯çš„ JSONï¼ˆpathã€basenameã€nameã€extensionï¼‰ |
| `__eventFileContent__` | æ–‡ä»¶å†…å®¹ï¼ˆç”¨äº create/modify/file-open äº‹ä»¶ï¼‰ |
| `__eventOldPath__` | ä¹‹å‰çš„è·¯å¾„ï¼ˆä»…ç”¨äº rename äº‹ä»¶ï¼‰ |

> **æ³¨æ„ï¼š** `prompt-file` å’Œ `prompt-selection` èŠ‚ç‚¹åœ¨ç”±äº‹ä»¶è§¦å‘æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨äº‹ä»¶æ–‡ä»¶ã€‚`prompt-selection` ä½¿ç”¨æ•´ä¸ªæ–‡ä»¶å†…å®¹ä½œä¸ºé€‰æ‹©ã€‚

---

# é€šç”¨è®¾ç½®

## æ”¯æŒçš„æ¨¡å‹

### ä»˜è´¹è®¡åˆ’
| æ¨¡å‹ | æè¿° |
|-------|-------------|
| Gemini 3.1 Pro Preview | æœ€æ–°æ——èˆ°æ¨¡å‹ï¼Œ1M ä¸Šä¸‹æ–‡ï¼ˆæ¨èï¼‰ |
| Gemini 3.1 Pro Preview (Custom Tools) | é’ˆå¯¹è‡ªå®šä¹‰å·¥å…·å’Œ bash çš„æ™ºèƒ½ä½“å·¥ä½œæµä¼˜åŒ– |
| Gemini 3 Flash Preview | å¿«é€Ÿæ¨¡å‹ï¼Œ1M ä¸Šä¸‹æ–‡ï¼Œæœ€ä½³æ€§ä»·æ¯” |
| Gemini 3 Pro Preview | æ——èˆ°æ¨¡å‹ï¼Œ1M ä¸Šä¸‹æ–‡ |
| Gemini 2.5 Flash | å¿«é€Ÿæ¨¡å‹ï¼Œ1M ä¸Šä¸‹æ–‡ |
| Gemini 2.5 Pro | Pro æ¨¡å‹ï¼Œ1M ä¸Šä¸‹æ–‡ |
| Gemini 2.5 Flash Lite | è½»é‡çº§ flash æ¨¡å‹ |
| Gemini 2.5 Flash (Image) | å›¾åƒç”Ÿæˆï¼Œ1024px |
| Gemini 3 Pro (Image) | Pro å›¾åƒç”Ÿæˆï¼Œ4K |

> **Thinking æ¨¡å¼ï¼š** åœ¨èŠå¤©ä¸­ï¼Œå½“æ¶ˆæ¯åŒ…å«"æ€è€ƒ"ã€"åˆ†æä¸€ä¸‹"æˆ–"è€ƒè™‘"ç­‰å…³é”®è¯æ—¶ä¼šè§¦å‘ Thinking æ¨¡å¼ã€‚ä½†æ˜¯ï¼Œ**Gemini 3 Pro** å’Œ **Gemini 3.1 Pro** æ— è®ºæ˜¯å¦åŒ…å«å…³é”®è¯éƒ½å§‹ç»ˆä½¿ç”¨ Thinking æ¨¡å¼â€”â€”è¿™äº›æ¨¡å‹ä¸æ”¯æŒç¦ç”¨ Thinkingã€‚

### å…è´¹è®¡åˆ’
| æ¨¡å‹ | ä»“åº“æ“ä½œ |
|-------|------------------|
| Gemini 2.5 Flash | âœ… |
| Gemini 2.5 Flash Lite | âœ… |
| Gemini 3 Flash Preview | âœ… |
| Gemma 3 (27B/12B/4B/1B) | âŒ |

## å®‰è£…

### BRATï¼ˆæ¨èï¼‰
1. å®‰è£… [BRAT](https://github.com/TfTHacker/obsidian42-brat) æ’ä»¶
2. æ‰“å¼€ BRAT è®¾ç½® â†’ "Add Beta plugin"
3. è¾“å…¥ï¼š`https://github.com/takeshy/obsidian-gemini-helper`
4. åœ¨ç¤¾åŒºæ’ä»¶è®¾ç½®ä¸­å¯ç”¨è¯¥æ’ä»¶

### æ‰‹åŠ¨å®‰è£…
1. ä» releases ä¸‹è½½ `main.js`ã€`manifest.json`ã€`styles.css`
2. åœ¨ `.obsidian/plugins/` ä¸­åˆ›å»º `gemini-helper` æ–‡ä»¶å¤¹
3. å¤åˆ¶æ–‡ä»¶å¹¶åœ¨ Obsidian è®¾ç½®ä¸­å¯ç”¨

### ä»æºç æ„å»º
```bash
git clone https://github.com/takeshy/obsidian-gemini-helper
cd obsidian-gemini-helper
npm install
npm run build
```

## é…ç½®

### API è®¾ç½®
1. ä» [ai.google.dev](https://ai.google.dev) è·å– API å¯†é’¥
2. åœ¨æ’ä»¶è®¾ç½®ä¸­è¾“å…¥
3. é€‰æ‹© API è®¡åˆ’ï¼ˆå…è´¹/ä»˜è´¹ï¼‰

![åŸºç¡€è®¾ç½®](docs/images/setting_basic.png)

### CLI æ¨¡å¼ï¼ˆGemini / Claude / Codexï¼‰

**Gemini CLIï¼š**
1. å®‰è£… [Gemini CLI](https://github.com/google-gemini/gemini-cli)
2. ä½¿ç”¨ `gemini` â†’ `/auth` è¿›è¡Œèº«ä»½éªŒè¯
3. åœ¨ Gemini CLI éƒ¨åˆ†ç‚¹å‡»"Verify"

**Claude CLIï¼š**
1. å®‰è£… [Claude Code](https://github.com/anthropics/claude-code)ï¼š`npm install -g @anthropic-ai/claude-code`
2. ä½¿ç”¨ `claude` è¿›è¡Œèº«ä»½éªŒè¯
3. åœ¨ Claude CLI éƒ¨åˆ†ç‚¹å‡»"Verify"

**Codex CLIï¼š**
1. å®‰è£… [Codex CLI](https://github.com/openai/codex)ï¼š`npm install -g @openai/codex`
2. ä½¿ç”¨ `codex` è¿›è¡Œèº«ä»½éªŒè¯
3. åœ¨ Codex CLI éƒ¨åˆ†ç‚¹å‡»"Verify"

**CLI é™åˆ¶ï¼š** ä»…æ”¯æŒåªè¯»ä»“åº“æ“ä½œï¼Œä¸æ”¯æŒè¯­ä¹‰æœç´¢/ç½‘é¡µæœç´¢

**è‡ªå®šä¹‰ CLI è·¯å¾„ï¼š** å¦‚æœ CLI è‡ªåŠ¨æ£€æµ‹å¤±è´¥ï¼Œç‚¹å‡» Verify æŒ‰é’®æ—è¾¹çš„é½¿è½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰æ‰‹åŠ¨æŒ‡å®š CLI è·¯å¾„ã€‚

<details>
<summary><b>Windowsï¼šå¦‚ä½•æŸ¥æ‰¾ CLI è·¯å¾„</b></summary>

1. æ‰“å¼€ PowerShell å¹¶è¿è¡Œï¼š
   ```powershell
   Get-Command gemini
   ```
2. è¿™ä¼šæ˜¾ç¤ºè„šæœ¬è·¯å¾„ï¼ˆä¾‹å¦‚ï¼š`C:\Users\YourName\AppData\Roaming\npm\gemini.ps1`ï¼‰
3. ä» `npm` æ–‡ä»¶å¤¹å¯¼èˆªåˆ°å®é™…çš„ `index.js`ï¼š
   ```
   C:\Users\YourName\AppData\Roaming\npm\node_modules\@google\gemini-cli\dist\index.js
   ```
4. åœ¨ CLI è·¯å¾„è®¾ç½®ä¸­è¾“å…¥æ­¤å®Œæ•´è·¯å¾„

å¯¹äº Claude CLIï¼Œä½¿ç”¨ `Get-Command claude` å¹¶å¯¼èˆªåˆ° `node_modules\@anthropic-ai\claude-code\dist\index.js`ã€‚
</details>

> [!TIP]
> **Claude CLI æŠ€å·§ï¼š** æ¥è‡ª Gemini Helper çš„èŠå¤©ä¼šè¯ä¼šæœ¬åœ°å­˜å‚¨ã€‚æ‚¨å¯ä»¥åœ¨ Obsidian ä¹‹å¤–ç»§ç»­å¯¹è¯ï¼Œæ–¹æ³•æ˜¯åœ¨æ‚¨çš„ä»“åº“ç›®å½•ä¸­è¿è¡Œ `claude --resume` æ¥æŸ¥çœ‹å’Œæ¢å¤ä¹‹å‰çš„ä¼šè¯ã€‚

### å·¥ä½œåŒºè®¾ç½®
- **å·¥ä½œåŒºæ–‡ä»¶å¤¹** - èŠå¤©å†å²å’Œè®¾ç½®å­˜å‚¨ä½ç½®
- **ç³»ç»Ÿæç¤ºè¯** - é¢å¤–çš„ AI æŒ‡ä»¤
- **å·¥å…·é™åˆ¶** - æ§åˆ¶å‡½æ•°è°ƒç”¨é™åˆ¶
- **ç¼–è¾‘å†å²** - è¿½è¸ªå’Œæ¢å¤ AI æ‰€åšçš„æ›´æ”¹

![å·¥å…·é™åˆ¶å’Œç¼–è¾‘å†å²](docs/images/setting_tool_history.png)

### åŠ å¯†

åˆ†åˆ«ä½¿ç”¨å¯†ç ä¿æŠ¤æ‚¨çš„èŠå¤©å†å²å’Œå·¥ä½œæµæ‰§è¡Œæ—¥å¿—ã€‚

**è®¾ç½®æ­¥éª¤ï¼š**

1. åœ¨æ’ä»¶è®¾ç½®ä¸­è®¾ç½®å¯†ç ï¼ˆä½¿ç”¨å…¬é’¥åŠ å¯†å®‰å…¨å­˜å‚¨ï¼‰

![åŠ å¯†åˆå§‹è®¾ç½®](docs/images/setting_initial_encryption.png)

2. è®¾ç½®åï¼Œä¸ºæ¯ç§æ—¥å¿—ç±»å‹åˆ‡æ¢åŠ å¯†ï¼š
   - **åŠ å¯† AI èŠå¤©å†å²** - åŠ å¯†èŠå¤©å¯¹è¯æ–‡ä»¶
   - **åŠ å¯†å·¥ä½œæµæ‰§è¡Œæ—¥å¿—** - åŠ å¯†å·¥ä½œæµå†å²æ–‡ä»¶

![åŠ å¯†è®¾ç½®](docs/images/setting_encryption.png)

æ¯ä¸ªè®¾ç½®å¯ä»¥ç‹¬ç«‹å¯ç”¨/ç¦ç”¨ã€‚

**åŠŸèƒ½ï¼š**
- **ç‹¬ç«‹æ§åˆ¶** - é€‰æ‹©è¦åŠ å¯†çš„æ—¥å¿—ï¼ˆèŠå¤©ã€å·¥ä½œæµæˆ–ä¸¤è€…ï¼‰
- **è‡ªåŠ¨åŠ å¯†** - æ ¹æ®è®¾ç½®ï¼Œæ–°æ–‡ä»¶åœ¨ä¿å­˜æ—¶åŠ å¯†
- **å¯†ç ç¼“å­˜** - æ¯ä¸ªä¼šè¯åªéœ€è¾“å…¥ä¸€æ¬¡å¯†ç 
- **ä¸“ç”¨æŸ¥çœ‹å™¨** - åŠ å¯†æ–‡ä»¶åœ¨å¸¦é¢„è§ˆçš„å®‰å…¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€
- **è§£å¯†é€‰é¡¹** - éœ€è¦æ—¶å¯ä»å•ä¸ªæ–‡ä»¶ç§»é™¤åŠ å¯†

**å·¥ä½œåŸç†ï¼š**

```
ã€è®¾ç½® - è®¾ç½®å¯†ç æ—¶ä»…ä¸€æ¬¡ã€‘
å¯†ç  â†’ ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆRSAï¼‰ â†’ åŠ å¯†ç§é’¥ â†’ å­˜å‚¨åœ¨è®¾ç½®ä¸­

ã€åŠ å¯† - æ¯ä¸ªæ–‡ä»¶ã€‘
æ–‡ä»¶å†…å®¹ â†’ ç”¨æ–° AES å¯†é’¥åŠ å¯† â†’ ç”¨å…¬é’¥åŠ å¯† AES å¯†é’¥
â†’ ä¿å­˜åˆ°æ–‡ä»¶ï¼šåŠ å¯†æ•°æ® + åŠ å¯†ç§é’¥ï¼ˆä»è®¾ç½®å¤åˆ¶ï¼‰ + salt

ã€è§£å¯†ã€‘
å¯†ç  + salt â†’ æ¢å¤ç§é’¥ â†’ è§£å¯† AES å¯†é’¥ â†’ è§£å¯†æ–‡ä»¶å†…å®¹
```

- å¯†é’¥å¯¹åªç”Ÿæˆä¸€æ¬¡ï¼ˆRSA ç”Ÿæˆè¾ƒæ…¢ï¼‰ï¼ŒAES å¯†é’¥ä¸ºæ¯ä¸ªæ–‡ä»¶ç”Ÿæˆ
- æ¯ä¸ªæ–‡ä»¶å­˜å‚¨ï¼šåŠ å¯†å†…å®¹ + åŠ å¯†ç§é’¥ï¼ˆä»è®¾ç½®å¤åˆ¶ï¼‰ + salt
- æ–‡ä»¶æ˜¯è‡ªåŒ…å«çš„ â€” ä»…éœ€å¯†ç å³å¯è§£å¯†ï¼Œæ— éœ€æ’ä»¶ä¾èµ–

<details>
<summary>Python è§£å¯†è„šæœ¬ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</summary>

```python
#!/usr/bin/env python3
"""æ— éœ€æ’ä»¶è§£å¯† Gemini Helper åŠ å¯†æ–‡ä»¶"""
import base64, sys, re, getpass
from cryptography.hazmat.primitives import hashes, serialization
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC
from cryptography.hazmat.primitives.ciphers.aead import AESGCM
from cryptography.hazmat.primitives.asymmetric import padding

def decrypt_file(filepath: str, password: str) -> str:
    with open(filepath, 'r') as f:
        content = f.read()

    match = re.match(r'^---\n([\s\S]*?)\n---\n([\s\S]*)$', content)
    if not match:
        raise ValueError("æ— æ•ˆçš„åŠ å¯†æ–‡ä»¶æ ¼å¼")

    frontmatter, encrypted_data = match.groups()
    key_match = re.search(r'key:\s*(.+)', frontmatter)
    salt_match = re.search(r'salt:\s*(.+)', frontmatter)
    if not key_match or not salt_match:
        raise ValueError("frontmatter ä¸­ç¼ºå°‘ key æˆ– salt")

    enc_private_key = base64.b64decode(key_match.group(1).strip())
    salt = base64.b64decode(salt_match.group(1).strip())
    data = base64.b64decode(encrypted_data.strip())

    kdf = PBKDF2HMAC(algorithm=hashes.SHA256(), length=32, salt=salt, iterations=100000)
    derived_key = kdf.derive(password.encode())

    iv, enc_priv = enc_private_key[:12], enc_private_key[12:]
    private_key_pem = AESGCM(derived_key).decrypt(iv, enc_priv, None)
    private_key = serialization.load_der_private_key(base64.b64decode(private_key_pem), None)

    key_len = (data[0] << 8) | data[1]
    enc_aes_key = data[2:2+key_len]
    content_iv = data[2+key_len:2+key_len+12]
    enc_content = data[2+key_len+12:]

    aes_key = private_key.decrypt(enc_aes_key, padding.OAEP(
        mgf=padding.MGF1(algorithm=hashes.SHA256()), algorithm=hashes.SHA256(), label=None))

    return AESGCM(aes_key).decrypt(content_iv, enc_content, None).decode('utf-8')

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print(f"ç”¨æ³•: {sys.argv[0]} <åŠ å¯†æ–‡ä»¶>")
        sys.exit(1)
    password = getpass.getpass("å¯†ç : ")
    print(decrypt_file(sys.argv[1], password))
```

éœ€è¦: `pip install cryptography`

</details>

> **è­¦å‘Šï¼š** å¦‚æœæ‚¨å¿˜è®°å¯†ç ï¼ŒåŠ å¯†æ–‡ä»¶å°†æ— æ³•æ¢å¤ã€‚è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„å¯†ç ã€‚

> **æç¤ºï¼š** è¦ä¸€æ¬¡æ€§åŠ å¯†ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨å·¥ä½œæµã€‚å‚è§ [WORKFLOW_NODES_zh.md](docs/WORKFLOW_NODES_zh.md#obsidian-command) ä¸­çš„"åŠ å¯†ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶"ç¤ºä¾‹ã€‚

![æ–‡ä»¶åŠ å¯†å·¥ä½œæµ](docs/images/enc.png)

**å®‰å…¨ä¼˜åŠ¿ï¼š**
- **å— AI èŠå¤©ä¿æŠ¤** - åŠ å¯†æ–‡ä»¶æ— æ³•è¢« AI ä»“åº“æ“ä½œï¼ˆ`read_note` å·¥å…·ï¼‰è¯»å–ã€‚è¿™å¯ä»¥ä¿æŠ¤ API å¯†é’¥ç­‰æ•æ„Ÿæ•°æ®åœ¨èŠå¤©è¿‡ç¨‹ä¸­ä¸ä¼šæ„å¤–æ³„éœ²ã€‚
- **å·¥ä½œæµé€šè¿‡å¯†ç è®¿é—®** - å·¥ä½œæµå¯ä»¥ä½¿ç”¨ `note-read` èŠ‚ç‚¹è¯»å–åŠ å¯†æ–‡ä»¶ã€‚è®¿é—®æ—¶ä¼šå¼¹å‡ºå¯†ç å¯¹è¯æ¡†ï¼Œå¯†ç ä¼šåœ¨ä¼šè¯æœŸé—´ç¼“å­˜ã€‚
- **å®‰å…¨å­˜å‚¨æœºå¯†** - æ— éœ€åœ¨å·¥ä½œæµä¸­ç›´æ¥å†™å…¥ API å¯†é’¥ï¼Œè€Œæ˜¯å°†å…¶å­˜å‚¨åœ¨åŠ å¯†æ–‡ä»¶ä¸­ã€‚å·¥ä½œæµåœ¨å¯†ç éªŒè¯åè¿è¡Œæ—¶è¯»å–å¯†é’¥ã€‚

### æ–œæ å‘½ä»¤
- å®šä¹‰é€šè¿‡ `/` è§¦å‘çš„è‡ªå®šä¹‰æç¤ºè¯æ¨¡æ¿
- å¯ä¸ºæ¯ä¸ªå‘½ä»¤å•ç‹¬è®¾ç½®æ¨¡å‹å’Œæœç´¢

![æ–œæ å‘½ä»¤](docs/images/setting_slash_command.png)

## ä½¿ç”¨æ–¹æ³•

### æ‰“å¼€èŠå¤©
- ç‚¹å‡»åŠŸèƒ½åŒºä¸­çš„ Gemini å›¾æ ‡
- å‘½ä»¤ï¼š"Gemini Helper: Open chat"
- åˆ‡æ¢ï¼š"Gemini Helper: Toggle chat / editor"

### èŠå¤©æ§åˆ¶
- **Enter** - å‘é€æ¶ˆæ¯
- **Shift+Enter** - æ¢è¡Œ
- **åœæ­¢æŒ‰é’®** - åœæ­¢ç”Ÿæˆ
- **+ æŒ‰é’®** - æ–°å»ºèŠå¤©
- **å†å²æŒ‰é’®** - åŠ è½½ä¹‹å‰çš„èŠå¤©

### ä½¿ç”¨å·¥ä½œæµ

**ä»ä¾§è¾¹æ ï¼š**
1. åœ¨ä¾§è¾¹æ ä¸­æ‰“å¼€**å·¥ä½œæµ**æ ‡ç­¾
2. æ‰“å¼€åŒ…å« `workflow` ä»£ç å—çš„æ–‡ä»¶
3. ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©å·¥ä½œæµï¼ˆæˆ–é€‰æ‹© **Browse all workflows** æœç´¢ä»“åº“ä¸­çš„æ‰€æœ‰å·¥ä½œæµï¼‰
4. ç‚¹å‡»**è¿è¡Œ**æ‰§è¡Œ
5. ç‚¹å‡»**å†å²**æŸ¥çœ‹è¿‡å»çš„è¿è¡Œè®°å½•

**ä»å‘½ä»¤é¢æ¿ï¼ˆRun Workflowï¼‰ï¼š**

ä½¿ç”¨"Gemini Helper: Run Workflow"å‘½ä»¤ä»ä»»ä½•ä½ç½®æµè§ˆå’Œæ‰§è¡Œå·¥ä½œæµï¼š

1. æ‰“å¼€å‘½ä»¤é¢æ¿å¹¶æœç´¢"Run Workflow"
2. æµè§ˆæ‰€æœ‰åŒ…å«å·¥ä½œæµä»£ç å—çš„ Vault æ–‡ä»¶ï¼ˆ`workflows/` æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ä¼˜å…ˆæ˜¾ç¤ºï¼‰
3. é¢„è§ˆå·¥ä½œæµå†…å®¹å’Œ AI ç”Ÿæˆå†å²
4. é€‰æ‹©å·¥ä½œæµå¹¶ç‚¹å‡» **Run** æ‰§è¡Œ

![è¿è¡Œå·¥ä½œæµæ¨¡æ€æ¡†](docs/images/workflow_list.png)

è¿™å¯¹äºå¿«é€Ÿè¿è¡Œå·¥ä½œæµè€Œæ— éœ€é¦–å…ˆå¯¼èˆªåˆ°å·¥ä½œæµæ–‡ä»¶éå¸¸æœ‰ç”¨ã€‚

![å·¥ä½œæµå†å²](docs/images/workflow_history.png)

**å¯è§†åŒ–ä¸ºæµç¨‹å›¾ï¼š** ç‚¹å‡» Workflow é¢æ¿ä¸­çš„ **Canvas** æŒ‰é’®ï¼ˆç½‘æ ¼å›¾æ ‡ï¼‰ï¼Œå°†å·¥ä½œæµå¯¼å‡ºä¸º Obsidian Canvasã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªå¯è§†åŒ–æµç¨‹å›¾ï¼š
- å¾ªç¯å’Œåˆ†æ”¯ä»¥é€‚å½“çš„è·¯ç”±æ¸…æ™°æ˜¾ç¤º
- æ¡ä»¶èŠ‚ç‚¹ï¼ˆ`if`/`while`ï¼‰æ˜¾ç¤ºæ˜¯/å¦è·¯å¾„
- å¾ªç¯è¿”å›ç®­å¤´ç»•è¿‡èŠ‚ç‚¹ä»¥æé«˜æ¸…æ™°åº¦
- æ¯ä¸ªèŠ‚ç‚¹æ˜¾ç¤ºå…¶å®Œæ•´é…ç½®
- åŒ…å«æŒ‡å‘æºå·¥ä½œæµæ–‡ä»¶çš„é“¾æ¥ï¼Œä¾¿äºå¿«é€Ÿå¯¼èˆª

![Workflow to Canvas](docs/images/workflow_to_canvas.png)

è¿™å¯¹äºç†è§£å…·æœ‰å¤šä¸ªåˆ†æ”¯å’Œå¾ªç¯çš„å¤æ‚å·¥ä½œæµç‰¹åˆ«æœ‰ç”¨ã€‚

**å¯¼å‡ºæ‰§è¡Œå†å²ï¼š** å°†æ‰§è¡Œå†å²å¯è§†åŒ–ä¸º Obsidian Canvas è¿›è¡Œå¯è§†åˆ†æã€‚åœ¨å†å²æ¨¡æ€æ¡†ä¸­ç‚¹å‡» **Open Canvas view** åˆ›å»º Canvas æ–‡ä»¶ã€‚

> **æ³¨æ„ï¼š** Canvas æ–‡ä»¶ä¼šåŠ¨æ€åˆ›å»ºåœ¨ workspace æ–‡ä»¶å¤¹ä¸­ã€‚æŸ¥çœ‹åå¦‚ä¸å†éœ€è¦ï¼Œè¯·æ‰‹åŠ¨åˆ é™¤ã€‚

![å†å² Canvas è§†å›¾](docs/images/history_canvas.png)

### AI å·¥ä½œæµç”Ÿæˆ

**ä½¿ç”¨ AI åˆ›å»ºæ–°å·¥ä½œæµï¼š**
1. ä»å·¥ä½œæµä¸‹æ‹‰èœå•ä¸­é€‰æ‹© **+ New (AI)**
2. è¾“å…¥å·¥ä½œæµåç§°å’Œè¾“å‡ºè·¯å¾„ï¼ˆæ”¯æŒ `{{name}}` å˜é‡ï¼‰
3. ç”¨è‡ªç„¶è¯­è¨€æè¿°å·¥ä½œæµåº”è¯¥åšä»€ä¹ˆ
4. é€‰æ‹©æ¨¡å‹å¹¶ç‚¹å‡»**ç”Ÿæˆ**
5. å·¥ä½œæµä¼šè‡ªåŠ¨åˆ›å»ºå¹¶ä¿å­˜

> **æç¤ºï¼š** åœ¨å·²æœ‰å·¥ä½œæµçš„æ–‡ä»¶ä¸Šä½¿ç”¨ä¸‹æ‹‰èœå•ä¸­çš„ **+ New (AI)** æ—¶ï¼Œè¾“å‡ºè·¯å¾„ä¼šé»˜è®¤è®¾ç½®ä¸ºå½“å‰æ–‡ä»¶ã€‚ç”Ÿæˆçš„å·¥ä½œæµå°†è¿½åŠ åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚

**ä»ä»»æ„æ–‡ä»¶åˆ›å»ºå·¥ä½œæµï¼š**

å½“åœ¨æ²¡æœ‰å·¥ä½œæµä»£ç å—çš„æ–‡ä»¶ä¸Šæ‰“å¼€å·¥ä½œæµæ ‡ç­¾æ—¶ï¼Œä¼šæ˜¾ç¤º **"Create workflow with AI"** æŒ‰é’®ã€‚ç‚¹å‡»å®ƒå¯ä»¥ç”Ÿæˆæ–°çš„å·¥ä½œæµï¼ˆé»˜è®¤è¾“å‡ºï¼š`workflows/{{name}}.md`ï¼‰ã€‚

**@ æ–‡ä»¶å¼•ç”¨ï¼š**

åœ¨æè¿°å­—æ®µä¸­è¾“å…¥ `@` ä»¥å¼•ç”¨æ–‡ä»¶ï¼š
- `@{selection}` - å½“å‰ç¼–è¾‘å™¨é€‰æ‹©å†…å®¹
- `@{content}` - æ´»åŠ¨ç¬”è®°å†…å®¹
- `@path/to/file.md` - Vault ä¸­çš„ä»»æ„æ–‡ä»¶

ç‚¹å‡»ç”Ÿæˆæ—¶ï¼Œæ–‡ä»¶å†…å®¹ä¼šç›´æ¥åµŒå…¥åˆ° AI è¯·æ±‚ä¸­ã€‚YAML å‰ç½®ä¿¡æ¯ä¼šè‡ªåŠ¨ç§»é™¤ã€‚

> **æç¤ºï¼š** è¿™å¯¹äºåŸºäº Vault ä¸­ç°æœ‰çš„å·¥ä½œæµç¤ºä¾‹æˆ–æ¨¡æ¿åˆ›å»ºå·¥ä½œæµéå¸¸æœ‰ç”¨ã€‚

**æ–‡ä»¶é™„ä»¶ï¼š**

ç‚¹å‡»é™„ä»¶æŒ‰é’®å¯ä»¥é™„åŠ æ–‡ä»¶ï¼ˆå›¾åƒã€PDFã€æ–‡æœ¬æ–‡ä»¶ï¼‰åˆ°æ‚¨çš„å·¥ä½œæµç”Ÿæˆè¯·æ±‚ä¸­ã€‚è¿™å¯¹äºå‘ AI æä¾›è§†è§‰ä¸Šä¸‹æ–‡æˆ–ç¤ºä¾‹éå¸¸æœ‰ç”¨ã€‚

**æ¨¡æ€æ¡†æ§åˆ¶ï¼š**

AI å·¥ä½œæµæ¨¡æ€æ¡†æ”¯æŒæ‹–æ”¾å®šä½å’Œä»è§’è½è°ƒæ•´å¤§å°ï¼Œä»¥æä¾›æ›´å¥½çš„ç¼–è¾‘ä½“éªŒã€‚

**è¯·æ±‚å†å²ï¼š**

æ¯ä¸ª AI ç”Ÿæˆçš„å·¥ä½œæµéƒ½ä¼šåœ¨å·¥ä½œæµä»£ç å—ä¸Šæ–¹ä¿å­˜å†å²è®°å½•ï¼ŒåŒ…æ‹¬ï¼š
- æ—¶é—´æˆ³å’Œæ“ä½œï¼ˆå·²åˆ›å»º/å·²ä¿®æ”¹ï¼‰
- æ‚¨çš„è¯·æ±‚æè¿°
- å¼•ç”¨çš„æ–‡ä»¶å†…å®¹ï¼ˆåœ¨å¯æŠ˜å éƒ¨åˆ†ä¸­ï¼‰

![å·¥ä½œæµ AI å†å²](docs/images/workflow_ai_history.png)

**ä½¿ç”¨ AI ä¿®æ”¹ç°æœ‰å·¥ä½œæµï¼š**
1. åŠ è½½ç°æœ‰å·¥ä½œæµ
2. ç‚¹å‡» **AI Modify** æŒ‰é’®ï¼ˆæ˜Ÿå½¢å›¾æ ‡ï¼‰
3. æè¿°æ‚¨æƒ³è¦çš„æ›´æ”¹
4. æŸ¥çœ‹å‰åå¯¹æ¯”
5. ç‚¹å‡»**åº”ç”¨æ›´æ”¹**è¿›è¡Œæ›´æ–°

![AI å·¥ä½œæµä¿®æ”¹](docs/images/modify_workflow_with_ai.png)

**æ‰§è¡Œå†å²å¼•ç”¨ï¼š**

ä½¿ç”¨ AI ä¿®æ”¹å·¥ä½œæµæ—¶ï¼Œæ‚¨å¯ä»¥å¼•ç”¨ä¹‹å‰çš„æ‰§è¡Œç»“æœæ¥å¸®åŠ© AI ç†è§£é—®é¢˜ï¼š

1. ç‚¹å‡»**å¼•ç”¨æ‰§è¡Œå†å²**æŒ‰é’®
2. ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€æ¬¡æ‰§è¡Œè¿è¡Œï¼ˆé”™è¯¯è¿è¡Œä¼šé«˜äº®æ˜¾ç¤ºï¼‰
3. é€‰æ‹©è¦åŒ…å«çš„æ­¥éª¤ï¼ˆé”™è¯¯æ­¥éª¤é»˜è®¤é¢„é€‰ï¼‰
4. AI ä¼šæ”¶åˆ°æ­¥éª¤çš„è¾“å…¥/è¾“å‡ºæ•°æ®ï¼Œä»¥äº†è§£å“ªé‡Œå‡ºäº†é—®é¢˜

è¿™å¯¹äºè°ƒè¯•å·¥ä½œæµç‰¹åˆ«æœ‰ç”¨ - æ‚¨å¯ä»¥å‘Šè¯‰ AI"ä¿®å¤æ­¥éª¤ 2 ä¸­çš„é”™è¯¯"ï¼Œå®ƒä¼šå‡†ç¡®åœ°çœ‹åˆ°æ˜¯ä»€ä¹ˆè¾“å…¥å¯¼è‡´äº†å¤±è´¥ã€‚

**è¯·æ±‚å†å²ï¼š**

é‡æ–°ç”Ÿæˆå·¥ä½œæµæ—¶ï¼ˆåœ¨é¢„è§ˆä¸­ç‚¹å‡»"å¦"ï¼‰ï¼Œä¼šè¯ä¸­æ‰€æœ‰ä¹‹å‰çš„è¯·æ±‚éƒ½ä¼šä¼ é€’ç»™ AIã€‚è¿™æœ‰åŠ©äº AI ç†è§£æ‚¨åœ¨å¤šæ¬¡è¿­ä»£ä¸­ä¿®æ”¹çš„å®Œæ•´ä¸Šä¸‹æ–‡ã€‚

**æ‰‹åŠ¨å·¥ä½œæµç¼–è¾‘ï¼š**

ä½¿ç”¨æ‹–æ”¾ç•Œé¢åœ¨å¯è§†åŒ–èŠ‚ç‚¹ç¼–è¾‘å™¨ä¸­ç›´æ¥ç¼–è¾‘å·¥ä½œæµã€‚

![æ‰‹åŠ¨å·¥ä½œæµç¼–è¾‘](docs/images/modify_workflow_manual.png)

**ä»æ–‡ä»¶é‡æ–°åŠ è½½ï¼š**
- ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© **Reload from file** ä»¥ä» markdown æ–‡ä»¶é‡æ–°å¯¼å…¥å·¥ä½œæµ

## ç³»ç»Ÿè¦æ±‚

- Obsidian v0.15.0+
- Google AI API å¯†é’¥ï¼Œæˆ– CLI å·¥å…·ï¼ˆGemini CLI / Claude CLI / Codex CLIï¼‰
- æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ï¼ˆCLI æ¨¡å¼ï¼šä»…é™æ¡Œé¢ç«¯ï¼‰

## éšç§

**æœ¬åœ°å­˜å‚¨çš„æ•°æ®ï¼š**
- API å¯†é’¥ï¼ˆå­˜å‚¨åœ¨ Obsidian è®¾ç½®ä¸­ï¼‰
- èŠå¤©å†å²ï¼ˆMarkdown æ–‡ä»¶ï¼Œå¯é€‰åŠ å¯†ï¼‰
- å·¥ä½œæµæ‰§è¡Œå†å²ï¼ˆå¯é€‰åŠ å¯†ï¼‰
- åŠ å¯†å¯†é’¥ï¼ˆç§é’¥ä½¿ç”¨æ‚¨çš„å¯†ç åŠ å¯†ï¼‰

**å‘é€åˆ° Google çš„æ•°æ®ï¼š**
- æ‰€æœ‰èŠå¤©æ¶ˆæ¯å’Œæ–‡ä»¶é™„ä»¶éƒ½ä¼šå‘é€åˆ° Google Gemini API è¿›è¡Œå¤„ç†
- å¯ç”¨ RAG æ—¶ï¼Œä»“åº“æ–‡ä»¶ä¼šä¸Šä¼ åˆ° Google File Search
- å¯ç”¨ç½‘é¡µæœç´¢æ—¶ï¼ŒæŸ¥è¯¢ä¼šå‘é€åˆ° Google æœç´¢

**å‘é€åˆ°ç¬¬ä¸‰æ–¹æœåŠ¡çš„æ•°æ®ï¼š**
- å·¥ä½œæµ `http` èŠ‚ç‚¹å¯ä»¥å‘å·¥ä½œæµä¸­æŒ‡å®šçš„ä»»ä½• URL å‘é€æ•°æ®

**CLI æä¾›ç¨‹åºï¼ˆå¯é€‰ï¼‰ï¼š**
- å¯ç”¨ CLI æ¨¡å¼æ—¶ï¼Œå¤–éƒ¨ CLI å·¥å…·ï¼ˆgeminiã€claudeã€codexï¼‰é€šè¿‡ child_process æ‰§è¡Œ
- ä»…åœ¨ç”¨æˆ·æ˜ç¡®é…ç½®å’ŒéªŒè¯æ—¶æ‰ä¼šå‘ç”Ÿ
- CLI æ¨¡å¼ä»…é™æ¡Œé¢ç«¯ï¼ˆç§»åŠ¨ç«¯ä¸å¯ç”¨ï¼‰

**MCP æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰ï¼š**
- MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æœåŠ¡å™¨å¯ä»¥åœ¨æ’ä»¶è®¾ç½®ä¸­ä¸ºå·¥ä½œæµ `mcp` èŠ‚ç‚¹é…ç½®
- MCP æœåŠ¡å™¨æ˜¯æä¾›é¢å¤–å·¥å…·å’ŒåŠŸèƒ½çš„å¤–éƒ¨æœåŠ¡

**é€šè¿‡ GemiHub åŒæ­¥ Google Driveï¼ˆå¯é€‰ï¼‰ï¼š**
- å¯ç”¨ Google Drive åŒæ­¥åï¼ŒVault æ–‡ä»¶ä¼šä¸Šä¼ åˆ°æ‚¨è‡ªå·±çš„ Google Drive è´¦æˆ·
- ä½¿ç”¨çš„ç½‘ç»œç«¯ç‚¹ï¼š
  - `https://www.googleapis.com/drive/v3` â€” æ–‡ä»¶å…ƒæ•°æ®å’ŒåŒæ­¥æ“ä½œ
  - `https://www.googleapis.com/upload/drive/v3` â€” æ–‡ä»¶ä¸Šä¼ 
  - `https://gemihub.online/api/obsidian/token` â€” OAuth ä»¤ç‰Œåˆ·æ–°ï¼ˆè§ä¸‹æ–‡ï¼‰
- **ä»¤ç‰Œåˆ·æ–°æµç¨‹ï¼š** æ‚¨çš„åŠ å¯†åˆ·æ–°ä»¤ç‰Œè¢«å‘é€åˆ° GemiHub ä»£ç†ï¼Œä»£ç†æ·»åŠ  OAuth å®¢æˆ·ç«¯å¯†é’¥åå°†è¯·æ±‚è½¬å‘åˆ° Google çš„ä»¤ç‰Œç«¯ç‚¹ã€‚ç”±äº OAuth å®¢æˆ·ç«¯å¯†é’¥æ— æ³•å®‰å…¨åœ°åµŒå…¥å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œå› æ­¤éœ€è¦ä»£ç†ã€‚ä»£ç†ä¸ä¼šå­˜å‚¨æˆ–è®°å½•ä»¤ç‰Œã€‚è¯·å‚é˜… [GemiHub éšç§æ”¿ç­–](https://gemihub.online/privacy)ã€‚
- åŠ å¯†çš„è®¤è¯æ•°æ®ï¼ˆRSA + AES-256-GCMï¼‰å­˜å‚¨åœ¨æ’ä»¶è®¾ç½®ä¸­ï¼›è§£å¯†å¯†ç æ°¸è¿œä¸ä¼šè¢«ä¼ è¾“
- ä¸ä¼šå‘ GemiHub å‘é€ä»»ä½• Vault å†…å®¹ â€” æ–‡ä»¶ç›´æ¥åœ¨ Obsidian å’Œ Google Drive API ä¹‹é—´åŒæ­¥

**å®‰å…¨æ³¨æ„äº‹é¡¹ï¼š**
- è¿è¡Œå‰è¯·å®¡æŸ¥å·¥ä½œæµ - `http` èŠ‚ç‚¹å¯ä»¥å°†ä»“åº“æ•°æ®ä¼ è¾“åˆ°å¤–éƒ¨ç«¯ç‚¹
- å·¥ä½œæµ `note` èŠ‚ç‚¹åœ¨å†™å…¥æ–‡ä»¶å‰ä¼šæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
- è®¾ç½® `confirmEdits: false` çš„æ–œæ å‘½ä»¤å°†è‡ªåŠ¨åº”ç”¨æ–‡ä»¶ç¼–è¾‘ï¼Œä¸æ˜¾ç¤ºåº”ç”¨/æ”¾å¼ƒæŒ‰é’®
- æ•æ„Ÿå‡­æ®ï¼šä¸è¦å°† API å¯†é’¥æˆ–ä»¤ç‰Œç›´æ¥å­˜å‚¨åœ¨å·¥ä½œæµ YAML ä¸­ï¼ˆ`http` å¤´ã€`mcp` è®¾ç½®ç­‰ï¼‰ã€‚è¯·å°†å®ƒä»¬å­˜å‚¨åœ¨åŠ å¯†æ–‡ä»¶ä¸­ï¼Œå¹¶ä½¿ç”¨ `note-read` èŠ‚ç‚¹åœ¨è¿è¡Œæ—¶è·å–ã€‚å·¥ä½œæµå¯ä»¥é€šè¿‡å¯†ç æç¤ºè¯»å–åŠ å¯†æ–‡ä»¶ã€‚

æœ‰å…³æ•°æ®ä¿ç•™æ”¿ç­–ï¼Œè¯·å‚é˜… [Google AI æœåŠ¡æ¡æ¬¾](https://ai.google.dev/terms)ã€‚

## è®¸å¯è¯

MIT

## å®éªŒæ€§åŠŸèƒ½

### Google Drive Sync (GemiHub Connection)

é€šè¿‡ [GemiHub](https://gemihub.online) å°†æ‚¨çš„ Obsidian vault ä¸ Google Drive åŒæ­¥ã€‚åœ¨ Obsidian ä¸­ç¼–è¾‘ç¬”è®°å¹¶ä» GemiHub çš„ç½‘é¡µç•Œé¢è®¿é—®ï¼Œåä¹‹äº¦ç„¶ã€‚

![Drive Sync è§£é”](docs/images/gemihub_connection/start_with_sync.png)

**GemiHub ç‹¬æœ‰åŠŸèƒ½**ï¼ˆObsidian æ’ä»¶ä¸­ä¸å¯ç”¨ï¼‰ï¼š

- **Automatic RAG** - åŒæ­¥åˆ° GemiHub çš„æ–‡ä»¶ä¼šåœ¨æ¯æ¬¡åŒæ­¥æ—¶è‡ªåŠ¨ç´¢å¼•ä»¥è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®
- **OAuth2-enabled MCP** - ä½¿ç”¨éœ€è¦ OAuth2 è®¤è¯çš„ MCP æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ Google Calendarã€Gmailã€Google Docsï¼‰
- **Markdown to PDF/HTML conversion** - å°†æ‚¨çš„ Markdown ç¬”è®°è½¬æ¢ä¸ºæ ¼å¼åŒ–çš„ PDF æˆ– HTML æ–‡æ¡£
- **Public publishing** - ä½¿ç”¨å¯å…±äº«çš„å…¬å¼€ URL å‘å¸ƒè½¬æ¢åçš„ HTML/PDF æ–‡æ¡£

**é€šè¿‡è¿æ¥ä¸º Obsidian æ·»åŠ çš„åŠŸèƒ½ï¼š**

- **å¸¦ diff é¢„è§ˆçš„åŒå‘åŒæ­¥** - Push å’Œ pull æ–‡ä»¶æ—¶æä¾›è¯¦ç»†çš„æ–‡ä»¶åˆ—è¡¨å’Œ unified diff è§†å›¾ï¼Œåœ¨æäº¤æ›´æ”¹å‰è¿›è¡Œç¡®è®¤
- **å¸¦ diff çš„å†²çªè§£å†³** - å½“åŒä¸€æ–‡ä»¶åœ¨ä¸¤ç«¯éƒ½è¢«ç¼–è¾‘æ—¶ï¼Œä½¿ç”¨å½©è‰² unified diff è§£å†³å†²çª
- **Drive ç¼–è¾‘å†å²** - è·Ÿè¸ªæ¥è‡ª Obsidian å’Œ GemiHub ä¸¤ç«¯çš„æ›´æ”¹ï¼ŒæŒ‰æ–‡ä»¶æ˜¾ç¤ºå†å²å¹¶æ ‡æ³¨æ¥æºï¼ˆæœ¬åœ°/è¿œç¨‹ï¼‰
- **å†²çªå¤‡ä»½ç®¡ç†** - æµè§ˆã€é¢„è§ˆå’Œæ¢å¤å­˜å‚¨åœ¨ Drive ä¸Šçš„å†²çªå¤‡ä»½

> **è®¾ç½®ï¼š** è¯·å‚é˜… [GemiHub Connection æŒ‡å—](docs/GEMIHUB_CONNECTION_zh.md) è·å–è®¾ç½®è¯´æ˜ã€‚

## é“¾æ¥

- [Gemini API æ–‡æ¡£](https://ai.google.dev/docs)
- [Obsidian æ’ä»¶æ–‡æ¡£](https://docs.obsidian.md/Plugins/Getting+started/Build+a+plugin)

## æ”¯æŒ

å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªæ’ä»¶æœ‰ç”¨ï¼Œè¯·è€ƒè™‘è¯·æˆ‘å–æ¯å’–å•¡ï¼

[![Buy Me A Coffee](https://img.shields.io/badge/Buy%20Me%20A%20Coffee-support-yellow?logo=buymeacoffee)](https://buymeacoffee.com/takeshy)
